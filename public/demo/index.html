<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="generator" content="Hugo 0.86.1" />

  <title>Question Answering Demo &middot; Spatial Group</title>

  <meta name="description" content="About: Martin Tomko" />

  

<meta itemprop="name" content="Question Answering Demo">
<meta itemprop="description" content="About: Martin Tomko"><meta itemprop="datePublished" content="2019-02-28T00:00:00+00:00" />
<meta itemprop="dateModified" content="2019-02-28T00:00:00+00:00" />
<meta itemprop="wordCount" content="649"><meta itemprop="image" content="http://tomko.org/images/profile.png"/>
<meta itemprop="keywords" content="" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://tomko.org/images/profile.png"/>

<meta name="twitter:title" content="Question Answering Demo"/>
<meta name="twitter:description" content="About: Martin Tomko"/>


<meta property="og:title" content="Question Answering Demo" />
<meta property="og:description" content="About: Martin Tomko" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://tomko.org/demo/" /><meta property="og:image" content="http://tomko.org/images/profile.png"/><meta property="article:section" content="" />
<meta property="article:published_time" content="2019-02-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-02-28T00:00:00+00:00" /><meta property="og:site_name" content="Spatial Group" />




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type":"Person",
      "@id": "http://tomko.org/#author",
      "name":  null ,
      "image": {
        "@type":"ImageObject",
        
        "url": "http://tomko.org/images/profile.png"
        
      },
      "description": "Martin Tomko's group at the University of Melbourne"
    },
    {
      "@type": "WebSite",
      "@id": "http://tomko.org/#website",
      "url": "http://tomko.org/",
      "name": "Spatial Group",
      "description": "Martin Tomko's group at the University of Melbourne",
      "publisher": {
        "@id": "http://tomko.org/#author"
      },
      "inLanguage": "en-us"
    },
    {
      "@type": "ImageObject",
      "url": "http://tomko.org/images/profile.png",
      "caption": "Spatial Group"
    },
    {
      "@type": "ImageObject",
      "url": "http://tomko.org/images/img_20190330_084958.jpg",
      "caption": "Spatial Group"
    },
    {
      "@type": "ImageObject",
      "url": "http://tomko.org/images/recruitment_a4_internal.png",
      "caption": "Spatial Group"
    },
    {
      "@type": "ImageObject",
      "url": "http://tomko.org/images/people/ivanmajic.jpg",
      "caption": "Spatial Group"
    },
    {
      "@type": "WebPage",
      "@id": "http://tomko.org/demo/#webpage",
      "url": "http://tomko.org/demo/",
      "name": "Question Answering Demo",
      "isPartOf": {
        "@id": "http://tomko.org/#website"
      },
      "about": {
         "@id": "http://tomko.org/#author"
      },
      "datePublished": "2019-02-28T00:00:00+00:00",
      "dateModified": "2019-02-28T00:00:00+00:00",
      "description": "About: Martin Tomko",
      "inLanguage": "en-us",
      "potentialAction": [
        {
          "@type": "ReadAction",
          "target": [
            "http://tomko.org/demo/"
          ]
        }
      ]
    },
    {
      "@type": "Article",
      "isPartOf": {
        "@id": "http://tomko.org/demo/#webpage"
      },
      "mainEntityOfPage": {
        "@id": "http://tomko.org/demo/#webpage"
      },
      "headline": "Question Answering Demo",
      "datePublished": "2019-02-28T00:00:00+00:00",
      "dateModified": "2019-02-28T00:00:00+00:00",
      "publisher": {
        "@id": "http://tomko.org/#author"
      },
      "keywords": [
      ],
      "articleSection": [
      ],
      "inLanguage": "en-us",
      "author": {
        "@type": "Person",
        "name": "Martin Tomko"
      },
      "potentialAction": [
        {
          "@type": "CommentAction",
          "name": "Comment",
          "target": [
            "http://tomko.org/demo/#comments"
          ]
        }
      ]
    }
  ]
}
</script>



  <link type="text/css"
        rel="stylesheet"
        href="/css/print.css"
        media="print">

  <link type="text/css"
        rel="stylesheet"
        href="/css/poole.css">

  <link type="text/css"
        rel="stylesheet"
        href="/css/hyde.css">

  
<style type="text/css">
  .sidebar {
    background-color: #1B4F72;
  }

  .read-more-link a {
    border-color: #1B4F72;
  }

  .read-more-link a:hover {
    background-color: #1B4F72;
  }

  .pagination li a {
    color: #1B4F72;
    border: 1px solid #1B4F72;
  }

  .pagination li.active a {
    background-color: #1B4F72;
  }

  .pagination li a:hover {
    background-color: #1B4F72;
    opacity: 0.75;
  }

  footer a,
  .content a,
  .related-posts li a:hover {
    color: #1B4F72;
  }
</style>



  <link type="text/css" rel="stylesheet" href="/css/people.css"><link type="text/css" rel="stylesheet" href="/css_bootstrap.min.css">

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700&display=swap">

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css"
        integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk="
        crossorigin="anonymous" />

  <link rel="apple-touch-icon-precomposed"
        sizes="144x144"
        href="/apple-touch-icon-144-precomposed.png">

  <link rel="shortcut icon" href="/favicon.png">

  
  </head>
<body>
  <aside class="sidebar">
  <div class="container">
    <div class="sidebar-about">
      
        
        <div class="author-image">
          <a href="http://tomko.org/">
            <img src="/images/profile.png" class="img-circle img-headshot center" alt="Profile Picture">
          </a>
        </div>
        
      

      <h1>Spatial Group</h1>

      
      <p class="lead">Martin Tomko&#39;s group at the University of Melbourne</p>
      
    </div>

    <nav>
      <ul class="sidebar-nav">
        <li>
          <a href="http://tomko.org/">Home</a>
        </li>
        <li>
          <a href="/about/">About</a>
        </li><li>
          <a href="/people/">People</a>
        </li><li>
          <a href="/demo/">Demo</a>
        </li><li>
          <a href="/publications/">Publications</a>
        </li><li>
          <a href="/contact/">Contact</a>
        </li><li>
          <a href="/posts/">Posts</a>
        </li><li>
          <a href="/categories/">Categories</a>
        </li><li>
          <a href="/tags/">Tags</a>
        </li>
      </ul>
    </nav>

    <section class="social-icons">
      
      <a href="https://www.linkedin.com/in/tomko/" rel="me" title="Linkedin" target="_blank">
        <i class="fab fa-linkedin" aria-hidden="true"></i>
      </a>
      
      <a href="https://github.com/tomkom" rel="me" title="GitHub" target="_blank">
        <i class="fab fa-github" aria-hidden="true"></i>
      </a>
      
      <a href="https://twitter.com/dinomirMT" rel="me" title="Twitter" target="_blank">
        <i class="fab fa-twitter" aria-hidden="true"></i>
      </a>
      
    </section>
  </div>
</aside>


  <main class="content container">
  <div class="post">
  <h1 class="title">Question Answering Demo</h1>
  

  

  <div>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous">
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<style>
	.accordion {
		background-color: #2773a5;
		color: #ffffff;
		cursor: pointer;
		padding: 18px;
		width: 100%;
		border: none;
		text-align: left;
		outline: none;
		font-size: 16px;
		transition: 0.4s;
	}

	.active,
	.accordion:hover {
		background-color: #1B4F72;
	}

	.accordion:after {
		content: '\002B';
		color: #777;
		font-weight: bold;
		float: right;
		margin-left: 5px;
	}

	.active:after {
		content: "\2212";
	}

	.panel {
		padding: 0 18px;
		background-color: white;
		max-height: 0;
		overflow: hidden;
		transition: max-height 0.2s ease-out;
	}

	img.animated-gif {
		width: 80px;
		height: auto;
	}
</style>
<title>Geographic Question Answering</title>
<script>
	function activate() {
		document.getElementById("sample-questions").classList.toggle("show");
	}

	window.onclick = function(event) {
		if (!event.target.matches('.dropdown-toggle')) {
			var dropdowns = document.getElementsByClassName("dropdown-menu");
			var i;
			for (i = 0; i < dropdowns.length; i++) {
				var openDropdown = dropdowns[i];
				if (openDropdown.classList.contains('show')) {
					openDropdown.classList.remove('show');
				}
			}
		}
	}

	function sample_input(val) {
		document.getElementById("question-text").value = val
	}

	function analyze() {
		question = document.getElementById("question-text").value
		document.getElementById("question-info").innerHTML =
			"<table style='max-width: 80%; background-color: #ffffff; border: 0px; border-spacing:0px'><tr style='height: 0;'><td style='background-color: #ffffff; border: 0px solid white;'><img class=\"animated-gif\" src=\"../images/loading.gif\"  align=\"left\" ></td><td style='background-color: #ffffff; border: 0px solid white;'>  Processing... </td></tr></table> "
		var xhr = new XMLHttpRequest();
		var url = "http:\/\/45.113.235.161:1313\/question";
		xhr.open("POST", url, true);
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.onreadystatechange = function() {
			if (xhr.readyState === 4 && xhr.status === 200) {
				var json = JSON.parse(xhr.responseText);
				create_encoding_table(json.encoding)
				fol_info = document.getElementById("fol-info")
				fol_info.innerHTML = json.fol

				query_info = document.getElementById("query-info");
				res_proc = preprocess(json.query);
				console.log(res_proc);
				query_info.value = res_proc[0];
				query_info.rows = res_proc[1] + 2;
				query_info.style.display = 'block';

				exquery_info = document.getElementById("exquery-info");
				res_proc2 = preprocess(json.executable);
				console.log(res_proc2);
				exquery_info.value = res_proc2[0];
				exquery_info.rows = res_proc2[1] + 2;
				exquery_info.style.display = 'block';
				document.getElementById("question-info").innerHTML =
					"<table style='max-width: 80%; background-color: #ffffff; border: 0px; border-spacing:0px'><tr style='height: 0;'><td style='background-color: #ffffff; border: 0px solid white;'><img class=\"animated-gif\" src=\"../images/generated.gif\" align=\"left\" ></td><td style='background-color: #ffffff; border: 0px solid white;'> Query Generated </td></tr></table>";

				execute_query(json.executable);
			} else if (xhr.readyState == 4 && xhr.status == 400) {
				document.getElementById("question-info").innerHTML =
					"<table style='max-width: 80%; background-color: #ffffff; border: 0px; border-spacing:0px'><tr style='height: 0;'><td style='background-color: #ffffff; border: 0px solid white;'><img class=\"animated-gif\" src=\"../images/failed.gif\" align=\"left\" ></td><td style='background-color: #ffffff; border: 0px solid white;'> Sorry, the query generation was not successful </td></tr></table>";
			};
		};
		var data = JSON.stringify({
			"question": question,
			"execute": "yes"
		});
		console.log(data);
		xhr.send(data);
	}

	function execute_query(query) {
		document.getElementById("question-info").innerHTML = "";
		var xhr = new XMLHttpRequest();
		var url = "http:\/\/45.113.235.161:3031\/queryJSON";
		xhr.open("POST", url, true);
		xhr.setRequestHeader("Content-Type", "application/json");
		xhr.onreadystatechange = function() {
			if (xhr.readyState === 4 && xhr.status === 200) {
			console.log(xhr.responseText)
			var json = JSON.parse(xhr.responseText);
			console.log(json);
			create_result_table(json);
		} else if (xhr.readyState == 4 && xhr.status == 400) {
			document.getElementById("question-info").innerHTML =
				"<table style='max-width: 80%; background-color: #ffffff; border: 0px; border-spacing:0px'><tr style='height: 0;'><td style='background-color: #ffffff; border: 0px solid white;'><img class=\"animated-gif\" src=\"../images/failed.gif\" align=\"left\" ></td><td style='background-color: #ffffff; border: 0px solid white;'> Sorry, the query generation was not successful </td></tr></table>";
		};
		}
		var data = JSON.stringify({
			"query": query
		});
		console.log(data);
		xhr.send(data);
	}

	function occurrences(string, subString, allowOverlapping) {
		string += "";
		subString += "";
		if (subString.length <= 0) return (string.length + 1);

		var n = 0,
			pos = 0,
			step = allowOverlapping ? 1 : subString.length;

		while (true) {
			pos = string.indexOf(subString, pos);
			if (pos >= 0) {
				++n;
				pos += step;
			} else break;
		}
		return n;
	}

	function preprocess(val) {
		var newline = String.fromCharCode(13, 10);
		let count = occurrences(val, "\n")
		val = val.replaceAll('\\n', newline);
		val = val.replaceAll('\\t', '&emsp;')
		return [val, count]
	}

	function create_result_table(json_object) {
		if ("boolean" in json_object) {
			var divContainer = document.getElementById("result-info");
			if (json_object.boolean) {
				divContainer.innerHTML = 'Yes';
			} else {
				divContainer.innerHTML = 'No'
			}
		} else {
			var table = document.createElement("table");
			table.setAttribute('class', 'styled-table')
			var tr = table.insertRow(-1);
			for (var i = 0; i < json_object.head.vars.length; i++) {
				var th = document.createElement("th");
				th.innerHTML = json_object.head.vars[i];
				th.style = "background-color: #1B4F72; color: #ffffff;"
				tr.appendChild(th);
			}

			for (var i = 0; i < json_object.results.bindings.length; i++) {
				value = json_object.results.bindings[i];
				tr = table.insertRow();
				for (var j = 0; j < json_object.head.vars.length; j++) {
					var cell = tr.insertCell();
					cell.innerHTML = value[json_object.head.vars[j]].value;
				}
			}

			var divContainer = document.getElementById("result-info");
			divContainer.innerHTML = '';
			divContainer.appendChild(table);
		}
		document.getElementById("question-info").innerHTML =
			"<table style='max-width: 80%; background-color: #ffffff; border: 0px; border-spacing:0px'><tr style='height: 0;'><td style='background-color: #ffffff; border: 0px solid white;'><img class=\"animated-gif\" src=\"../images/executed1.gif\" align=\"left\" ></td><td  style='background-color: #ffffff; border: 0px solid white;'> Query Executed</td></tr></table>"
	}

	function create_encoding_table(object_val) {
		var table = document.createElement("table");
		table.setAttribute('class', 'styled-table')
		var tr = table.insertRow(-1);
		var th_name = document.createElement("th");
		th_name.innerHTML = "name";
		th_name.style = "background-color: #1B4F72; color: #ffffff;"
		tr.appendChild(th_name);
		var th_pos = document.createElement("th");
		th_pos.innerHTML = "part-of-speech";
		th_pos.style = "background-color: #1B4F72; color: #ffffff;"
		tr.appendChild(th_pos);
		var th_role = document.createElement("th");
		th_role.innerHTML = "role";
		th_role.style = "background-color: #1B4F72; color: #ffffff;"
		tr.appendChild(th_role);

		for (var key in object_val) {
			value = object_val[key];
			tr = table.insertRow()
			var name_cell = tr.insertCell();
			name_cell.innerHTML = key.split('--')[0];
			var pos_cell = tr.insertCell();
			pos_cell.innerHTML = value.pos;
			var role_cell = tr.insertCell();
			role_cell.innerHTML = value.role;
		}

		var divContainer = document.getElementById("encoding-info");
		divContainer.innerHTML = '';

		divContainer.appendChild(table);
	}
</script>

<div class="post">
	<div style="text-align: center">
		<form class="">
			<div role="group" class="input-group">
				<div class="input-group-prepend">
					
					<div class="dropdown btn-group b-dropdown">
						
						<button type="button" class="btn dropdown-toggle btn-outline-secondary btn-sm" onclick="activate()" style="background-color: #1B4F72; color: #FFFFFF">
							Choose an example...
						</button>
						<ul role="menu" tabindex="-1" class="dropdown-menu" id="sample-questions">
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">What is the name of closest pub to Trafalgar Square?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">Is there any hospital in a range of 1 km from Jubilee Gardens?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">Which hospitals in Liverpool are near Abercromby Square?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">What is the name of the river that flows under the Queensway Bridge in Liverpool?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">How many historic monument are within 500 m of Trafalgar Square?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">Is Liverpool part of Scotland?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">Which pubs in Liverpool are within five hundred meter of Anfield Stadium?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">What is the name of the river that flows through Liverpool?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">What is the most populated county in the Wales?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">How many rivers cross England's cities?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">What is the longest river that cross London?</a>
							</li>
							<li>
								<a role="menuitem" onclick="sample_input(this.innerHTML);" href="#" class="dropdown-item">Which districts in England have population more than two hundred thousand?</a>
							</li>
						</ul>
					</div>
				</div>
				<input type="text" placeholder="or type a question..." class="form-control" id="question-text">
				<div class="input-group-append">
					<button type="button" onclick="analyze()" class="btn background hover btn-secondary" style="background-color: #1B4F72">
						<span role="status" class="fas fa-search text-white">
					</button>
				</div>
				
			</div>
		</form>
	</div>
</div>
<div>
	<div id='answer-info'><span id='question-info'></span></div>
	<div id='query-info-set'>
		<button class="accordion">Information extraction</button>
		<div class="panel">
			<div id="encoding-info">Here, information extraction results will be shown.</div>
		</div>
		<button class="accordion">Logical representation</button>
		<div class="panel">
			<div id="fol-info">Here, the logical representation of the question will be shown.</div>
		</div>
		<button class="accordion">Human-readable query</button>
		<div class="panel">
			<div id="query-info-div"> Human-readble GeoSPARQL query:
				<textarea id="query-info" style="display:none; width:100%">

			</textarea>
			</div>
		</div>
		<button class="accordion">Exectuable query</button>

		<div class="panel">
			<div id="exquery-info-div"> Executable GeoSPARQL query:
				<textarea id="exquery-info" style="display:none; width:100%">

			</textarea>
			</div>
		</div>
	</div>
	<button class="accordion">Results</button>
	<div class="panel">
		Results:
		<div id='result-info'></div>
	</div>
</div>

<script>
	var acc = document.getElementsByClassName("accordion");
	var i;

	for (i = 0; i < acc.length; i++) {
		acc[i].addEventListener("click", function() {
			this.classList.toggle("active");
			var panel = this.nextElementSibling;
			if (panel.style.maxHeight) {
				panel.style.maxHeight = null;
			} else {
				panel.style.maxHeight = panel.scrollHeight + "px";
			}
		});
	}
</script>


  </div>

  


  <div class="share-buttons">
  <a class="twitter-share-button"
     href="#"
     title="Share on Twitter"
     data-url="http://tomko.org/demo/"
     data-text="Question Answering Demo"><i class="fab fa-twitter"></i></a>

  <a class="linkedin-share-button"
     href="#"
     title="Share on LinkedIn"
     data-url="http://tomko.org/demo/"
     data-text="Question Answering Demo"><i class="fab fa-linkedin-in"></i></a>

  <a class="facebook-share-button"
     href="#"
     title="Share on Facebook"
     data-url="http://tomko.org/demo/"
     data-text="Question Answering Demo"><i class="fab fa-facebook"></i></a>

  <a class="telegram-share-button"
     href="#"
     title="Share on Telegram"
     data-url="http://tomko.org/demo/"
     data-text="Question Answering Demo"><i class="fab fa-telegram"></i></a>

  <a class="pinterest-share-button"
     href="#"
     title="Share on Pinterest"
     data-url="http://tomko.org/demo/"
     data-text="Question Answering Demo"><i class="fab fa-pinterest"></i></a>
</div>


  
</div>
  </main>

  <footer>
  <div>
    <p>
      &copy; Martin Tomko 2021

      &middot; <a href="https://creativecommons.org/licenses/by-sa/4.0" target="_blank">CC BY-SA 4.0</a>

      &middot; Build with <a href="https://gohugo.io/" target="_blank">Hugo</a> & <a href="https://themes.gohugo.io/soho/" target="_blank">Soho</a> theme
    </p>
  </div>
</footer>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/js/all.min.js"
          integrity="sha256-MAgcygDRahs+F/Nk5Vz387whB4kSK9NXlDN3w58LLq0="
          crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/pcooksey/bibtex-js@1.0.0/src/bibtex_js.js"></script>
  <script src="/js/jquery.min.js"></script>
  <script src="/js/soho.js"></script>

  <script src="/bibtex_js.js" type="text/javascript" charset="utf-8"></script>

  
</body>
</html>
